[["dataprep.html", "Data Preparation", " Data Preparation To show the sampling methods in action I use the example data from the Romeo mallete forest in Ontario. These data are included in the (???) package. These data were prepared suing the following method: ## [1] &quot;as.data.table&quot; #Load required libraries library(RMFinventory) library(raster) library(sf) ### Raster DATa wall_metrics &lt;- brick(system.file(&quot;extdata&quot;,&quot;wall_metrics_small.tif&quot;, package = &quot;RMFinventory&quot;)) names(wall_metrics) &lt;- c(&quot;avg&quot;, &quot;cov&quot;, &quot;std&quot;,&quot;p10&quot;, &quot;p20&quot;,&quot;p50&quot;,&quot;p70&quot;,&quot;p95&quot;, &quot;p99&quot;,&quot;d0&quot;,&quot;d2&quot;,&quot;d4&quot;,&quot;dns&quot;) #Coordinate system of wall-to-wall raster wall_crs &lt;- raster::crs(wall_metrics) #Plot plot(wall_metrics$avg) ### forest polygons #read forest polygon shapefile poly &lt;- st_read(system.file(&quot;extdata/inventory_polygons&quot;,&quot;inventory_polygons.shp&quot;, package = &quot;RMFinventory&quot;)) ## Reading layer `inventory_polygons&#39; from data source `G:\\Programs\\R-4.0.3\\library\\RMFinventory\\extdata\\inventory_polygons\\inventory_polygons.shp&#39; using driver `ESRI Shapefile&#39; ## Simple feature collection with 632 features and 111 fields ## geometry type: MULTIPOLYGON ## dimension: XY ## bbox: xmin: 431100 ymin: 5337700 xmax: 438560 ymax: 5343240 ## projected CRS: UTM_Zone_17_Northern_Hemisphere #Match CRS of wall-to-wall raster layer poly &lt;- st_transform(poly, wall_crs@projargs) poly_subset &lt;- poly[poly$POLYTYPE == &quot;FOR&quot; &amp; poly$OWNER == 1, ] plot(st_geometry(poly_subset), axes = TRUE, col = &quot;red&quot;) poly_subset &lt;- st_union(poly_subset) plot(st_geometry(poly_subset), axes = TRUE, col = &quot;red&quot;) #Transform to SpatialPolygonDataFrame object for compatibility with the raster package poly_subset &lt;- sf::as_Spatial(poly_subset) #Mask wall-to-wall layer wall_poly &lt;- raster::mask(wall_metrics, mask = poly_subset) plot(wall_poly$avg) ### roads #read roads shapefile roads &lt;- st_read(system.file(&quot;extdata/roads&quot;,&quot;roads.shp&quot;, package = &quot;RMFinventory&quot;)) ## Reading layer `roads&#39; from data source `G:\\Programs\\R-4.0.3\\library\\RMFinventory\\extdata\\roads\\roads.shp&#39; using driver `ESRI Shapefile&#39; ## Simple feature collection with 167 features and 36 fields ## geometry type: MULTILINESTRING ## dimension: XY ## bbox: xmin: 431100 ymin: 5337700 xmax: 438560 ymax: 5343240 ## projected CRS: UTM_Zone_17_Northern_Hemisphere roads &lt;- st_transform(roads, wall_crs@projargs) plot(roads[&quot;RDTYPE&quot;]) # Select only suitable road types # Highway (H), Municipal (M), Primary (P), Branch (B), Clay/mineral surface haul (C) and roads accessed when dry or frozen (d) , graveled (g), industrial grade road (i), highway or municipal road(r), yearly accessible (y) roads_subset &lt;- roads[roads$RDTYPE %in% c(&quot;H&quot;, &quot;M&quot;, &quot;P&quot;, &quot;B&quot;, &quot;C&quot;) &amp; roads$RDMOD %in% c(&quot;d&quot;, &quot;g&quot;, &quot;i&quot;, &quot;r&quot;, &quot;y&quot;), ] # Dissolve roads layer to work with only 1 feature roads_subset &lt;- st_union(roads_subset) plot(st_geometry(roads_subset)) #Create buffers of 30 m and 200 m roads_buffer_30m &lt;- st_buffer(roads_subset, dist = 30) roads_buffer_200m &lt;- st_buffer(roads_subset, dist = 200) #Take the symetrical difference between buffers to keep only roads &gt;- 30 m AND &lt;= 200 m roads_buffer &lt;- st_sym_difference(roads_buffer_200m, roads_buffer_30m) plot(st_geometry(roads_buffer)) #Transform to SpatialPolygonDataFrame object for compatibility with the raster package roads_buffer &lt;- sf::as_Spatial(roads_buffer) #Mask wall-to-wall layer wall_poly_roads &lt;- raster::mask(wall_poly, mask = roads_buffer) plot(wall_poly_roads$avg) rast_dt &lt;- as.data.table.raster(wall_poly_roads,xy=T) These are the final candidate samples from which we will perform our sampling. "]]
